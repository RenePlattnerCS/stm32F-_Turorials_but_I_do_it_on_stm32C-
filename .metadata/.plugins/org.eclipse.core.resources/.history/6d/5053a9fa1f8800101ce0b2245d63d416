#define PERIPH_BASE       0x40000000UL
#define AHB2PERIPH_BASE   (PERIPH_BASE + 0x08000000UL)
#define GPIOA_BASE        (AHB2PERIPH_BASE + 0x0000UL)
#define RCC_BASE          (PERIPH_BASE + 0x00021000UL)

#define RCC_IOPENR        (*(volatile unsigned int *)(RCC_BASE + 0x34))
#define GPIOA_MODER       (*(volatile unsigned int *)(GPIOA_BASE + 0x00))
#define GPIOA_ODR         (*(volatile unsigned int *)(GPIOA_BASE + 0x14))

int main(void)
{
    // 1. Enable clock for GPIOA (bit 0 in RCC_IOPENR)
    RCC_IOPENR |= (1 << 0);

    // 2. Set PA5 as output (MODER[11:10] = 01)
    GPIOA_MODER &= ~(3 << (5 * 2));  // Clear mode bits for PA5
    GPIOA_MODER |=  (1 << (5 * 2));  // Set as general purpose output

    // 3. Turn LED on (set bit 5 in ODR)
    GPIOA_ODR |= (1 << 5);

    while (1)
    {
        // Stay here, LED stays ON
    }
}
