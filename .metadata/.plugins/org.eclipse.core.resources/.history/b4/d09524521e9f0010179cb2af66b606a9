#include <stdint.h>
#include <stdio.h>
#include "stm32C0xx.h"
#include "uart.h"
#include "timer.h"

#include "systick.h"

#include "exti.h"

#define PIN5		(1U<<5)
#define PIN13		(1U<<13)
#define LED_PIN		PIN5
#define BTN_PIN		PIN13



int main(void)
{

	RCC->IOPENR |= (1U<<0);                  // enable GPIOA
	GPIOA->MODER &= ~(3U << (5 * 2));        // PA5 as output
	GPIOA->MODER |=  (1U << (5 * 2));

	uart2_tx_init();
	pc13_exti_init();


	while(1)
	{
		//printf("hey\n\r");
	}

}




void EXTI4_15_IRQHandler(void)
{


	if (EXTI->FPR1 & LINE13)   // check falling edge flag
	{
	    EXTI->FPR1 = LINE13;   // clear by writing 1
	    GPIOA->ODR ^= (1U << 5);
	}
}


